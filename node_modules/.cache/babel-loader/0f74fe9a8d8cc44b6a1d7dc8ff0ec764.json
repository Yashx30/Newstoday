{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/yash/visual code work/reactjs/proj/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/yash/visual code work/reactjs/proj/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/yash/visual code work/reactjs/proj/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/yash/visual code work/reactjs/proj/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/yash/visual code work/reactjs/proj/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/yash/visual code work/reactjs/proj/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Newsitem from\"./Newsitem\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(props){var _this;_classCallCheck(this,News);_this=_super.call(this,props);_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({page:_this.state.page+1});// this.componentDidMount()\n// this.handleNextClick()\nurl=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apikey=c1d68e0308ac4f268134f00f74e8c44b&pagesize=\").concat(_this.props.pageSize);_this.setState({loading:true});_context.next=5;return fetch(url);case 5:data=_context.sent;_context.next=8;return data.json();case 8:parsedData=_context.sent;console.log(parsedData);_this.setState({articles:_this.state.articles.concat(parsedData.articles),totalresult:parsedData.totalResults,loading:false});case 11:case\"end\":return _context.stop();}}},_callee);}));console.log(\"Hello I am Constructor from news component\");_this.state={articles:[],loading:true,page:1,totalResults:0};document.title=_this.props.category;return _this;}_createClass(News,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apikey=c1d68e0308ac4f268134f00f74e8c44b&pagesize=\").concat(this.props.pageSize);this.setState({loading:true});_context2.next=4;return fetch(url);case 4:data=_context2.sent;_context2.next=7;return data.json();case 7:parsedData=_context2.sent;console.log(parsedData);this.setState({articles:parsedData.articles,totalresult:parsedData.totalResults,loading:false});case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",children:[\"Mumbai Today-Top Headlines from \",this.props.category]}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.state.totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title?element.title.slice(0,45):\"\",description:element.description?element.description.slice(0,88):\"\",imageUrl:element.urlToImage,newsUrl:element.url,author:element.author,date:element.publishedAt})},element.url);})})})})]});}}]);return News;}(Component);News.defaultProps={country:\"in\",pageSize:5,category:\"general\"};export default News;","map":{"version":3,"sources":["C:/Users/yash/visual code work/reactjs/proj/newsapp/src/components/News.js"],"names":["React","Component","Newsitem","Spinner","InfiniteScroll","News","props","fetchMoreData","setState","page","state","url","country","category","pageSize","loading","fetch","data","json","parsedData","console","log","articles","concat","totalresult","totalResults","document","title","length","map","element","slice","description","urlToImage","author","publishedAt","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Newsitem from \"./Newsitem\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    country: \"in\",\r\n    pageSize: 5,\r\n    category: \"general\",\r\n  };\r\n  static propTypes = {\r\n    country: PropTypes.string,\r\n    pageSize: PropTypes.number,\r\n    category: PropTypes.string,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(\"Hello I am Constructor from news component\");\r\n    this.state = {\r\n      articles: [],\r\n      loading: true,\r\n      page: 1,\r\n      totalResults:0\r\n    };\r\n    document.title = this.props.category;\r\n  }\r\n  async componentDidMount() {\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=c1d68e0308ac4f268134f00f74e8c44b&pagesize=${this.props.pageSize}`;\r\n    this.setState({ loading: true });\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    console.log(parsedData);\r\n    this.setState({\r\n      articles: parsedData.articles,\r\n      totalresult: parsedData.totalResults,\r\n      loading: false,\r\n    });\r\n  }\r\n \r\n   fetchMoreData=  async()=>{\r\n    this.setState({page:this.state.page+1})\r\n    // this.componentDidMount()\r\n    // this.handleNextClick()\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=c1d68e0308ac4f268134f00f74e8c44b&pagesize=${this.props.pageSize}`;\r\n    this.setState({ loading: true });\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    console.log(parsedData);\r\n    this.setState({\r\n      articles:this.state.articles.concat( parsedData.articles),\r\n      totalresult: parsedData.totalResults,\r\n      loading: false,\r\n    })\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container my-3\">\r\n        <h1 className=\"text-center\">\r\n          Mumbai Today-Top Headlines from {this.props.category}\r\n        </h1>\r\n        {/* {this.state.loading && <Spinner></Spinner>} */}\r\n        <InfiniteScroll\r\n          dataLength={this.state.articles.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.articles.length!==this.state.totalResults}\r\n          loader={<Spinner/>}\r\n        >\r\n            <div className=\"container\">\r\n\r\n         \r\n\r\n        <div className=\"row\">\r\n          {this.state.articles.map((element) => {\r\n            return (\r\n              <div className=\"col-md-4\" key={element.url}>\r\n                <Newsitem\r\n                  title={element.title ? element.title.slice(0, 45) : \"\"}\r\n                  description={\r\n                    element.description ? element.description.slice(0, 88) : \"\"\r\n                  }\r\n                  imageUrl={element.urlToImage}\r\n                  newsUrl={element.url}\r\n                  author={element.author}\r\n                  date={element.publishedAt}\r\n                ></Newsitem>\r\n              </div>\r\n            );\r\n          })}\r\n          \r\n        </div>\r\n        </div>\r\n        </InfiniteScroll>\r\n      \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default News;\r\n"]},"metadata":{},"sourceType":"module"}